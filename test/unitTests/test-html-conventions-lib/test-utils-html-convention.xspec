<?xml version="1.0" encoding="UTF-8"?>
<x:description xmlns:x="http://www.jenitennison.com/xslt/xspec"
    xmlns:xmi="http://www.omg.org/spec/XMI/20131001"
    xmlns:f="http://https://github.com/costezki/model2owl#"
    stylesheet="file:../../../src/html-conventions-lib/utils-html-conventions.xsl">

    <x:scenario label="Generate a info in html">
        <x:call function="f:generateHtmlInfo">
            <x:param name="infoMessage">Info message</x:param>
        </x:call>
        <x:expect label="has info message" test="//dd//text() = 'Info message'"/>
    </x:scenario>

    <x:scenario label="Generate a warning in html">
        <x:call function="f:generateHtmlWarning">
            <x:param name="warningMessage">Warning message</x:param>
        </x:call>
        <x:expect label="has warning message" test="//dd//text() = 'Warning message'"/>
    </x:scenario>
    
    
    <x:scenario label="Generate an error in html">
        <x:call function="f:generateHtmlError">
            <x:param name="errorMessage">This has no description</x:param>
        </x:call>
        <x:expect label="has error message" test="//dd//text() = 'This has no description'"/>
    </x:scenario>
    
    
    <x:scenario label="Get connector helper name when direction is Source -> Destination and has no name">
        <x:call function="f:getConnectorName">
            <x:param name="connector" href="../../testData/ePO-CM-v2.0.1-2020-03-27_test.eap.xmi" select="/xmi:XMI/xmi:Extension[1]/connectors[1]/connector[18]"/>
        </x:call>
        <x:expect label="correct helper name for the connector">epo:AccessTerms &lt;-&gt; epo:Channel (+epo:hasRestrictedAccessAddress +source)</x:expect>
    </x:scenario>


    <x:scenario label="Get connector helper name when direction is Bi-Directional and has no name">
        <x:call function="f:getConnectorName">
            <x:param name="connector" href="../../testData/ePO-CM-v2.0.1-2020-03-27_test.eap.xmi" select="/xmi:XMI/xmi:Extension[1]/connectors[1]/connector[134]"/>
        </x:call>
        <x:expect label="correct helper name for the connector">epo:Procedure &lt;-&gt; epo:Contract (+epo:isConcludedBy +epo:concludes)</x:expect>
    </x:scenario>
    
    
    <x:scenario label="Get connector name when it has a name and it is not required to construct a helper name">
        <x:call function="f:getConnectorName">
            <x:param name="connector" href="../../testData/ePO-CM-v2.0.1-2020-03-27_test.eap.xmi" select="/xmi:XMI/xmi:Extension[1]/connectors[1]/connector[17]"/>
        </x:call>
        <x:expect label="correct helper name for the connector">test association</x:expect>
    </x:scenario>
    
    <x:scenario label="Get connector helper name when direction is unknown and has no name">
        <x:call function="f:getConnectorName">
            <x:param name="connector" href="../../testData/ePO-CM-v2.0.1-2020-03-27_test.eap.xmi" select="/xmi:XMI/xmi:Extension[1]/connectors[1]/connector[19]"/>
        </x:call>
        <x:expect label="correct helper name for the connector">epo:AccessTerms X epo:Organisation (+epo:hasAdditionalInformationProvidedBy +)</x:expect>
    </x:scenario>
    
    <x:scenario label="Get connector source name - Proxy connector">
        <x:call function="f:getConnectorSourceName">
            <x:param name="connector" href="../../testData/ePO-CM-v2.0.1-2020-06-08-mappings.eap.xmi" select="/xmi:XMI/xmi:Extension[1]/connectors[1]/connector[3]"/>
        </x:call>
        <x:expect label="correct target name" select="string('(epo:Document - epo:Procedure)')"></x:expect>
    </x:scenario>
    
    <x:scenario label="Get connector target name - Proxy connector">
        <x:call function="f:getConnectorTargetName">
            <x:param name="connector" href="../../testData/ePO-CM-v2.0.1-2020-06-08-mappings.eap.xmi" select="/xmi:XMI/xmi:Extension[1]/connectors[1]/connector[3]"/>
        </x:call>
        <x:expect label="correct target name" select="string('(epo:Document - epo:Procedure)')"></x:expect>
    </x:scenario>
    
    <x:scenario label="Get connector helper name when direction is Source -> Destination and has no name">
        <x:call function="f:getConnectorName">
            <x:param name="connector" href="../../testData/ePO-CM-v2.0.1-2020-06-08-mappings.eap.xmi" select="/xmi:XMI/xmi:Extension[1]/connectors[1]/connector[3]"/>
        </x:call>
        <x:expect label="correct name for the connector">(epo:Document - epo:Procedure) -> (epo:Document - epo:Procedure) (+)</x:expect>
    </x:scenario>
</x:description>
